---
id: 函数式编程简单理解
title: 函数式编程简单理解
author: 李川
author_title: 随便写写
author_url: https://github.com/newlichuan
author_image_url: /img/logo.jpg
---

#### 函数式编程的简单理解....

<!--truncate-->

### 简单理解

其实对函数式编程这个概念挺模糊的,因为 JavaScript 不算是典型的函数式编程语言,但是由于支持一等类型的函数  
所以我们也可以实现一些函数式编程的范式

#### 一等类型的函数

就是在 JavaScript 中,函数可以作为一个值来表示,跟其他的数据类型没有什么区别,所以简单概括一下函数基本特性

1. 函数可以做为值来传递
2. 函数可以接收参数,同时参数也可以是一个函数(参数为调用时作用域交互)
3. 函数可以返回值,同时返回值也可以是一个函数(返回值同样与调用作用域交互)
4. 函数自带闭包特性(始终保留创建时作用域链引用)
5. 函数调用也是属于表达式
6. 函数中可以创建函数,也可以调用另一个函数

以上的说明看起来像是废话,但是本来也就是这些基本的概念来回组合后,会产生一些灵活的写法

#### 函数式的连续运算

连续运算是函数式的一个基本模式了,比如 1+2\*3,但是当一个函数也可以作为值来参与运算了,这就会有巨大的灵活性了  
因为一个函数里面是可以包含逻辑的,然后又可以返回一个值,继续参与下一个运算,所以写多了就变成套娃了  
因为我们不是纯粹的函数式,所以也没必要链式调用,中间该拿变量存一下以提高可读性

```js
let str = "123";
str.replace().split().join();
// 类似这种
```

#### 无语句性

这跟上一条概念是联系在一起的,因为单纯的语句是没有返回值,自然也不能作为表达式来继续运算,这也就破坏了上一个的概念,所以有时候可以适当的替换掉语句,比如&& || 和三元表达式

```js
if (a) {
  console.log(123);
}
//替换
a && console.log(123);

if (d) {
  a = 123;
} else {
  a = 333;
}
//替换
a = d ? 123 : 333;
```

但是语句虽然看起来有点啰嗦,但是可读性还是最好的,而且复杂的逻辑还是要用语句来实现,所以可以把这些语句封装为一个函数

#### 递归与循环

同上 循环可以拿递归来实现,但是递归由于调用栈的问题,再加上现在的浏览器基本没有实现尾递归,所以拿递归来实现循环还是有性能成本的,一般可以用循环调用函数来代替

#### 括号与逗号运算符

同上,括号用于表示这一组是一个表达式,优先级最高,有写语法冲突的地方就可以加括号来解决,例如

```js
a || b = 123; //语法会报错
a || (b = 123); //不报错了
a => {
  a: 123;
}; // 语法会被解析为语句块
a => ({ a: 123 }); // 正常返回对象 因为被解析为表达式
eval("{a:123}"); //同解析为语句块
eval("({a:123})"); //正常返回
```

逗号运算符来组合多个表达式的,但是他只返回最后一个表达式的值,这在需要一个表达式的地方有用

```js
a => a, b, c, d;
```

例如这个箭头函数,语法要求是一个表达式,但是如果需要其他逻辑,可以用逗号,例如 a,b,c 都是函数调用
同时在复杂表达式中也可以搭配括号和逗号运算符完成复杂逻辑,因为逗号会跟函数调用中的逗号冲突

```js
a + (b, c, d) + e;
```

#### 高阶函数和回调函数

一个函数接收一个函数做为参数或者返回一个函数可以称为高阶函数  
而函数作为参数来传递我们叫他回调函数,这是两个概念性的定义,而不是说真有这种类型的函数

```js
[1, 2, 3, 4].map(a => a); //我们说map就算高阶函数,而这个参数就叫回调函数
```

本质还是函数作为值得能力来实现巨大的灵活性,这样就完成了数据传输和自定义逻辑的实现

#### 柯里化

应用场景就是 你需要调用一个函数时每次都需要传入固定的参数时,可以用 bind 方法来绑定,因为函数是封装重用逻辑的 而调用函数并传参自然也是一段逻辑,所以手动实现就是外面套一个函数,在内部调用需要的函数并传参

```js
function fn(a, b, c) {
  return a + b + c;
}
//假如我们确定每次调用都需要传入抢两个参数时,可以这么做

function bindfn(a, b) {
  return function (c) {
    return fn(a, b, c);
  };
}
//
```

#### 纯函数

纯函数就是固定输入 输出也是固定的,就是内部不依赖外部值,仅仅依赖传入得参数,无副作用就是不更改传入参数  
也不更改外部的值,不对外部产生变化.

```js
(a, b) => a + b;
```

例如此种函数,仅依靠入参,而且不更改入参,这样就减少了数据突变的可能.因为在一系列的函数调用中  
你不知道数据在哪里被改掉了是很可怕的,当然这是理想状态,在 js 中所有函数完全无副作用的是没可能的,所以我们只能把纯粹工具函数抽象成纯函数,该有副作用的函数也不能避免

### 总结

JS 不是纯函数式编程,其实我们只要了解基本范式就行了,就是函数组织逻辑,同时可以作为值,再加上闭包特性,这样就可以自由的组合,各种自己需要的功能,我们平时其实都是在这么做,这是基本范式
